extends ./modules/main
block variables
    - var pageTitle = 'profile'
block content 
    .container.d-flex.mt-3
        if(author)
            //- If the user that visit this page is not the profile owner
            .user-details.w-25.text-center.border-end.border-2.me-2
                img.img-icon(style="width:150px; height:150px", src=author.img, alt="The user Image")
                h3.m-0.mt-3= author.name
            if(contents)
                //- If the profile owner is author/editor/admin. The contents object here contains the reviewed contents only
                .contents.w-75
                    h2.mb-4 Contents
                    .d-flex.flex-wrap.justify-content-center.gap-3
                        each content in contents
                            .card.text-center(style="width: 18rem; cursor:pointer", onclick="openContent('"+content.id+"')")
                                .card-body
                                    h3.card-text.content-name.text-primary= content.name
                                    p= "comments: "+ content.commentsNum
                                    
                                    // --------- add the content prereview details here ---------

                        if(!contents.length)
                                .alert.alert-secondary.text-center.w-100 No content exist
        else 
            //- If the user that visit this page is the profile owner
            .user-details.w-25.text-center.border-end.border-2.me-2
                img.img-icon(style="width:150px; height:150px", src=user.img, alt="The user Image")
                h3.m-0.mt-3= user.name
            if(contents)
                //- If the profile owner is author/editor/admin. The contents object here contains the reviewed and unreviewed contents
                .contents.w-75
                    .reviewed
                        h2.mb-4 Contents
                        .reviewed-content.d-flex.flex-wrap.justify-content-center.gap-3
                            each content in contents.reviewed
                                .card.text-center(style="width: 18rem; cursor:pointer", onclick="openContent('"+content.id+"')")
                                    .card-body
                                        h3.card-text.content-name.text-primary= content.name
                                        p= "comments: "+ content.commentsNum

                                        // --------- add the content prereview details here ---------

                            if(!contents.reviewed.length)
                                    .alert.alert-secondary.text-center.w-100 No content exist
                    if(user.isAuthor)
                        hr
                        .under-review
                            h2.mb-4 Under Review Contents
                            .under-review-content.d-flex.flex-wrap.justify-content-center.gap-3
                                each content in contents.underReview
                                    .card.text-center(style="width: 18rem; cursor:pointer", id=content._id, onclick="openContent('"+content.id+"')")
                                        .card-body
                                            h3.card-text.content-name.text-primary= content.name

                                            // --------- add the content prereview details here ---------

                                if(!contents.underReview.length)
                                    .alert.alert-secondary.text-center.w-100 No content under review
                    hr
                    .card.text-center.m-auto(style="width: 18rem; cursor:pointer")
                        .card-body
                            span.card-text.text-primary(type="button" data-bs-toggle="modal" data-bs-target=".modal.add-content") 
                                i.fa-solid.fa-circle-plus(style="font-size: 60px;")
                                h3 Add
                    .modal.fade.add-content
                        .modal-dialog.modal-dialog-centered.modal-dialog-scrollable
                            .modal-content
                                form(action='/content/add' method='post')
                                    .modal-header
                                        h1.modal-title.fs-5 Add Content
                                        button.btn-close(type="button" data-bs-dismiss="modal" aria-label="Close")
                                    .modal-body
                                        .input-group.my-3
                                            span.input-group-text Content Name
                                            input.form-control(type='text' name='name' required)

                                            // --------- here you should requiest the details of the content form the author ---------
                                            
                                        .alert.alert-info.w-100 edit the code in myContent.pug to add the reset of the data that your content use
                                    .modal-footer
                                        if(user.isAuthor)
                                            button.btn.btn-success(type="button", onclick="confirmReviewer(this)") Save
                                        else
                                            button.btn.btn-success(type="submit") Save                                        
block js 
    script(src="/js/myContent.js") 